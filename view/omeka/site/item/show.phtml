<?php
$translate = $this->plugin('translate');
$escape = $this->plugin('escapeHtml');
$this->htmlElement('body')->appendAttribute('class', 'item resource show');
$embedMedia = $this->siteSetting('item_media_embed', false);
$itemMedia = $item->media();
?>
<div id="item-page">
	<?php echo $this->pageTitle($item->displayTitle(), 2); ?>
	<h3><?php echo $translate('Item'); ?></h3>
	<?php $this->trigger('view.show.before'); ?>
	
	
	<div id="item-page-media">
	<?php 
			
			//	Code to determine the class of the resource
			//	Version: 2023-02-13 PV
			
			$rc=strtolower($item->resourceClass()->label()); //resource class add this to relevant element classes so that display can react.
			$imc=count($itemMedia); //imc =item media count;
			$mbc="";
			if ($imc>0):$mbc = "split"; 	//if more than one media item, 
											//add 'split' to several element classes 
											//$mbc=mediabox-class
			endif;

		?>
	<?php if ($embedMedia && $itemMedia): ?>
		<div class="media-embeds <?php echo $rc ." ".$mbc ;?>">
		<?php foreach ($itemMedia as $media):?>
		<div class="media-box <?php echo $rc;?>">
			<div class="media-box-header">
				Media Titel:&nbsp; <?php if ($media->displayTitle()):echo $media->displayTitle();
				endif;?>
			</div>
			<div class="media-box-content">
			<?php	echo $media->render();?>
			</div>
		</div>
		<?php	endforeach;?>
		</div>
		<?php endif; ?>
	
	</div>
	<div id="item-page-properties">
	<div class="properties">
	
	
	
	
	<div class="resource-class property">
	<?php if ( $item->resourceClass()): ?>
	<h4>Resource class</h4>
		<div class="values"><div class="value"><?php echo $escape($translate($item->resourceClass()->label())); ?></div></div>
	 <?php endif; ?>
	</div>

	<?php echo $item->displayValues(); ?>

	<div class="property">
	<!--span style="background-color:red; color:white">values</span-->
		<?php $itemSets = $item->itemSets(); ?>
		<?php if (count($itemSets) > 0): ?>
		<h4><?php echo $translate('Item sets'); ?></h4>
		<div class="values">
			<?php foreach ($itemSets as $itemSet): ?>
			<div class="value"><a href="<?php echo $escape($itemSet->url()); ?>"><?php echo $itemSet->displayTitle(); ?></a></div>
			<?php endforeach; ?>
		</div>
		<?php endif; ?>
	</div>
	<?php if (!$embedMedia && $itemMedia): ?>
	<div class="media-list property">
		<h4><?php echo $translate('Media'); ?></h4>
		<div class="values">
		<?php foreach ($itemMedia as $media): ?>
		
		
			<?php echo $media->linkPretty(); ?>
		<?php endforeach; ?>
		</div>
	</div>
	<?php endif; ?>
	</div>
	</div>
	
	
	<?php
	$page = $this->params()->fromQuery('page', 1);
	$property = $this->params()->fromQuery('property');
	$subjectValues = $item->displaySubjectValues($page, 25, $property);
	?>
	<?php if ($subjectValues): ?>
	<div id="item-linked">
		<h3><?php echo $translate('Linked resources'); ?></h3>
		<?php echo $subjectValues; ?>
	</div>
	<?php endif; ?>
</div>
<?php $this->trigger('view.show.after'); ?>


<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery(document).trigger('enhance.tablesaw');        
    });
</script>
